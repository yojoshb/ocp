---
apiVersion: aap.ansible.com/v1alpha1
kind: AnsibleAutomationPlatform
metadata:
  name: aap
  namespace: aap
spec:
  route_tls_termination_mechanism: Edge
  no_log: true
  redis_mode: standalone
  image_pull_policy: IfNotPresent
  api:
    log_level: INFO
    replicas: 1
  extra_settings:
    - setting: REDIRECT_IS_HTTPS
      value: '"True"'

  #service_type: ClusterIP # <-- Optional: If you choose to omit this, the CR will create a service and route automatically based on the 'metadata: name'
  #ingress_type: Route
  #route_host: aap.apps.ocp.example.com # <-- This is the full route URL to reach the platform
  
  # Ansible Automation Platform Components
  database:
    idle_disabled: false
    postgres_data_volume_init: false
    #postgres_storage_class: nfs # <-- Optional: Will use the clusters 'default' storageclass if not specified
  
  controller:
    disabled: false
  
  eda:
    disabled: false

  hub:
    disabled: false
    file_storage_size: 20Gi
    file_storage_storage_class: nfs # <-- If hub is enabled, make sure it has access to a RWX capable storageclass
    storage_type: file

  lightspeed:
    disabled: true
  
